<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <h1> Account information page </h1>
    <h2> Please choose from the following options. </h2>
  </head>
  <body>
    <p id="change"></p>
    <p id="demo"></p>
    <button type="submit" name="button" onclick="tableOfAccounts()"> Get all accounts </button>
    <a href="delete.html"><button type = "submit"> Remove an account </button></a>
    <a href="add.html"><button type = "submit"> Add an account </button></a>
    <script>
      function getAll(url) {
        var request = new XMLHttpRequest();
        request.open("GET", url , false);
        request.send();
        document.getElementById("change").innerHTML = request.response;
      }
      function tableOfAccounts() {
      var accountListInJson = getAll('http://localhost:8082/accountapp/api/account/getAllAccounts');
      var col = [];
      for (var i = 0; i < accountListInJson.length;i++) {
        for (var key in getAll[i]) {
          if(col.indexOf(key) === -1) {
            col.push(key);
          }
        }
      }
      var table = document.createElement("table");
      var tr = table.insertRow(-1);

      for(var i =0; i < col.length;i++) {
        var th = document.createElement("th");
        th.innerHTML = col[i];
        tr.appendChild(th);
      }

      for(var i=0; i < accountListInJson.length; i++) {
        tr = table.insertRow(-1);

        for (var j = 0; j < col.length; j++) {
          var tabCell = tr.insertCell(-1);
          tabCell.innerHTML = accountListInJson[i][col[j]];
        }
      }
      var divContainer = document.getElementById("showData");
      divContainer.innerHTML = "";
      divContainer.appendChild(table);


    }
    </script>
  </body>
</html>
