<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <h1> Account information page </h1>
    <h2> Please choose from the following options. </h2>
  </head>
  <body>
    <p id="change"></p>
    <p id="demo"></p>
    <button type="submit" name="button" onclick=" getTable()"> Get all accounts </button>
    <a href="delete.html"><button type = "submit"> Remove an account </button></a>
    <a href="add.html"><button type = "submit"> Add an account </button></a>


    <script>
    var array = eval(getAll('http://localhost:8082/accountapp/api/account/getAllAccounts'));
      function getAll(url) {
        var request = new XMLHttpRequest();
        request.open("GET", url , false);
        request.send();
        return request.response;
      }
      document.getElementById("idnumber1").innerHTML =  array[2].id;;


      function getTable() {
      <table style="width:50%">
        <tr>
          <th>ID number</th>
          <th>Firstname</th>
          <th>Lastname</th>
          <th>Account number</th>
        </tr>
        <tr>
          <td>array[0].id</td>
          <td>Smith</td>
          <td>50</td>
          <td></td>
        </tr>
        <tr>
          <td>array[1].id</td>
          <td>Jackson</td>
          <td>94</td>
          <td></td>
        </tr>
        <tr>
          <td>John</td>
          <td>Doe</td>
          <td>80</td>
          <td></td>
        </tr>
        <tr>
          <td>John</td>
          <td>Doe</td>
          <td>80</td>
          <td></td>
        </tr>
      </table>
    }



      function tableOfAccounts() {
      var accountListInJson = getAll('http://localhost:8082/accountapp/api/account/getAllAccounts');
      var col = [];
      for (var i = 0; i < accountListInJson.length;i++) {
        for (var key in getAll[i]) {
          if(col.indexOf(key) === -1) {
            col.push(key);
          }
        }
      }
      var table = document.createElement("table");
      var tr = table.insertRow(-1);

      for(var i =0; i < col.length;i++) {
        var th = document.createElement("th");
        th.innerHTML = col[i];
        tr.appendChild(th);
      }

      for(var i=0; i < accountListInJson.length; i++) {
        tr = table.insertRow(-1);

        for (var j = 0; j < col.length; j++) {
          var tabCell = tr.insertCell(-1);
          tabCell.innerHTML = accountListInJson[i][col[j]];
        }
      }
      var divContainer = document.getElementById("showData");
      divContainer.innerHTML = "";
      divContainer.appendChild(table);


    }
    </script>
  </body>
</html>
